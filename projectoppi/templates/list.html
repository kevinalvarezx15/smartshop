{% extends "basegrid.html" %}

{% block title %}{{ title }}{% endblock title %}

{% block content %}
 <div class="col-md-12" style="height: 200px;" >
    <h1 style=" text-align: left; margin-top: 20px; margin-bottom: 10px;">Clientes</h1>
    {% block botones %}

    {% endblock %}

        <table id="example" class="table table-striped table-bordered" style="width:100%;">
            <thead>
                {% block columns %}

                {% endblock %}
            </thead>
            <tbody>
                {% block rows %}

                {% endblock %}
            </tbody>
        </table>
 </div>
<!-- Modal -->
<div class="modal fade " id="edicion" role="dialog">
    
      
</div>
{% endblock content %}
{% block extrajs %}
<script type="text/javascript">
    var editor;
    var selectArray="";
    var $=jQuery.noConflict();

    var visible=0;
    function openBuscar()
    {
        if(visible==0){
            document.getElementsByClassName("dataTables_filter")[0].style.visibility='visible';
            
            visible=1;
        }
        else{
            $('#example').DataTable().search( "" ).draw();
            document.getElementsByClassName("dataTables_filter")[0].style.visibility='hidden';
            visible=0;
        }
    }

    function openPopup(url){
        $('#edicion').load(url,function(){
            $(this).modal('show');
        });
    }
    function deleteRegister(){
      var table = $("#example").DataTable();      
      if(table.rows('.selected').data().length>0){
        var pk = table.rows('.selected').data()[0][0];
        var dataurl="{% url 'cliente:EliminarCliente' 0  %}"
        var url=dataurl.replace('0',pk)
        $('#edicion').load(url,function(){
        $('#edicion').modal('show');
        });

      }else{
        alert( 'Primero debe seleccionar el registro que desea eliminar' );
      }
      

    }
    function openEdit(){
        var table = $("#example").DataTable();
        if(table.rows('.selected').data().length>0){
            var pk = table.rows('.selected').data()[0][0];
            // var Nombre = table.rows('.selected').data()[0][1];
            // var Apellido = table.rows('.selected').data()[0][2];
            // var TipoPersona = table.rows('.selected').data()[0][3];
            // var TipoDocumento = table.rows('.selected').data()[0][4];
            // var Celular = table.rows('.selected').data()[0][5];
            // var Correo = table.rows('.selected').data()[0][6];
            // var Departamento = table.rows('.selected').data()[0][7];
            // var Municipio = table.rows('.selected').data()[0][8];
            // var Direccion = table.rows('.selected').data()[0][9];
            // var NombreContacto = table.rows('.selected').data()[0][10];
            // var TelefonoContacto = table.rows('.selected').data()[0][11];

            
            // $('select[name="TipoPersona"]').val(TipoPersona);
            // $('select[name="TipoDocumento"]').val(TipoDocumento);
            // $('input[name="nombre"]').val(Nombre);
            // $('input[name="apellido"]').val(Apellido);
            // $('input[name="documento"]').val(Cedula);
            // $('input[name="celular"]').val(Celular);
            // $('input[name="email"]').val(Correo);
            // $('input[name="direccion"]').val(Direccion);
            // $('input[name="nombreContacto"]').val(NombreContacto);
            // $('input[name="telefonoContacto"]').val(TelefonoContacto);
            // $('select[name="departamento"]').val(Departamento);
            // $('select[name="municipio"]').val(Municipio);

            var dataurl="{% url 'cliente:EditarCliente' 0  %}"
            var url=dataurl.replace('0',pk)
            $('#edicion').load(url,function(){
            $('#edicion').modal('show');
            });
            
        }else{
            alert( 'Primero debe seleccionar el registro que desea editar' );
        }
       
    }
    $(document).ready(function(){
        var events = $('#events');
        var table = $("#example").DataTable({

        language: {
            "select": {
            "cells": {
                "1": "",
                "_": ""
            },
            "columns": {
                "1": "",
                "_": ""
            },
            "rows": {
                "1": "",
                "_": ""
            }
            },
            "processing": "Procesando...",
            "lengthMenu": "Mostrar _MENU_ registros",
            "zeroRecords": "No se encontraron resultados",
            "emptyTable": "Ningún dato disponible en esta tabla",
            "infoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
            "infoFiltered": "(filtrado de un total de _MAX_ registros)",
            "search": "Buscar:",
            "infoThousands": ",",
            "loadingRecords": "Cargando...",
            "paginate": {
                "first": "Primero",
                "last": "Último",
                "next": "Siguiente",
                "previous": "Anterior"
            },
            "aria": {
                "sortAscending": ": Activar para ordenar la columna de manera ascendente",
                "sortDescending": ": Activar para ordenar la columna de manera descendente"
            },
            "info": "Mostrando _START_ a _END_ de _TOTAL_ registros"
            
        },
        "dom": '<"toolbar">frtip',
         //"dom": '<lf<t>ip>',
           // dom: 'Pfrtip',


           // "dom": '<"top"i>rt<"bottom"flp><"clear">',
       

              //2 - tipo de selección 
              select: {
                style: 'single'
                },
                

            //dom: "Bfrtip",
            //ajax: "../php/staff.php",
            searching: true,
            responsive: true,
            "scrollX": true,
            scrollY:        '50vh',
            scrollCollapse: true,

                
            
            
            // buttons: [
            //  {
                // extend: 'selected',
               
                //  action: function ( e, dt, node, config ) {
                //      for (var i = 0; i < table.rows('.selected').data().length; i++) {
                //      selectArray += table.rows('.selected').data()[i][2];
                //      if (i+1 < table.rows('.selected').data().length) {
                //        selectArray += ',';
                //      }
                //      }

                //      var rows = dt.rows( { selected: true } ).count();
    
                //      alert( 'Data seleccionado '+selectArray+'' );
                //  },
                // text: 'Reload',
                //     action: function ( e, dt, node, config ) {
                //         dt.ajax.reload();
                //     },
                // text: 'Reloade',
                //     action: function ( e, dt, node, config ) {
                //         dt.ajax.reload();
                //     }
                
                
                
        //     }
        //  ]

         });

     })

</script>
{% endblock extrajs %}